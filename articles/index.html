<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <!-- Preload category emoji images -->
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fishing-map.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fishing-knots.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-shore-fishing.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-boat-launch.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fish-skillet.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-bait-tackle.png" as="image">
  <link rel="preload" href="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fish-cleaning-station.png" as="image">
  
  <title>Articles & Information</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
     body {
      font-family: Arial, sans-serif;
      background: #f0f8ff;
      margin: 0;
      padding: 1rem;
      background-color: transparent;
    }

     .category {
      background: #7CCFCF; /* was #92D6B5 */
      color: #1a237e;
      padding: .5rem;
      margin-bottom: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .subcategory {
      display: none;
      background: #DCFAF7; /* was #e6fafa */
      padding: 0.5rem 1rem;
      margin-bottom: 0.5rem;
      border-left: 4px solid #3b9c9c;
    }

    /* collapse on load */
    .sub-subcategory {
      display: none;
      margin-left: 1rem;
      padding: 0.25rem .25rem;
      background: rgba(220, 250, 247, 0.80); /* was #DCFAF7 */
      border-left: 4px solid #3b9c9c;
    }

    .sub-subcategory h4 {
      margin: 0.5rem 0 0.25rem;
      color: #006666;
    }

    .sub-subcategory ul {
      padding-left: 1rem;
      padding-top: .15rem;
      list-style-type: none;
      margin: 0;
    }

    .sub-subcategory li {
      margin: 0.25rem 0;
    }

    .sub-subcategory a {
      color: #003333;
      text-decoration: none;
    }

    .sub-subcategory a:hover {
      text-decoration: underline;
    }

    @media (min-width: 600px) {
      body {
        max-width: 600px;
        margin: auto;
      }
    }

    body {
      background-color: transparent;
    }

    .emoji {
      height: 36px;
      margin-right: 0.5rem;
      vertical-align: middle;
    }
  </style>
</head>
<body>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-bait-tackle.png" alt="Bait & Tackle Shops">Bait & Tackle Shops
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/bait-and-tackle-shops.html" target="_blank">âœ” Where to buy bait and tackle locally</a></li></ul>
  </div>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fish-cleaning-station.png" alt="Clean Your Catch">Clean Your Catch
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/clean-your-catch.html" target="_blank">âœ” Locations that have Fish Cleaning Stations</a></li></ul>
  </div>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fish-skillet.png" alt="Cook Your Catch">Cook Your Catch
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/cook-your-catch.html" target="_blank">ðŸš§ Cook at home or have a restaurant cook and serve it up!</a></li></ul>
  </div>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-shore-fishing.png" alt="Shore Fishing">Shore Fishing
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/shore-fishing.html" target="_blank">ðŸš§ Best places to fish from the shore!</a></li></ul>
    <ul><li><a href="/articles/surf-fishing-beginner-guide.html" target="_blank">âœ” Surf Fishing Beginner's Quick Guide</a></li></ul>
  </div>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fishing-knots.png" alt="Knot Tying">Tie One On (Knot Tying)
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/fishing_knots_guide.html" target="_blank">âœ” Various Knots for certain needs!</a></li></ul>
  </div>

  <div class="category" onclick="toggle(this)">
    <img class="emoji" src="https://raw.githubusercontent.com/jaime62/hookedonporta-site/main/images/emoji-fishing-map.png" alt="Fishing Maps">Fishing Maps
  </div>
  <div class="sub-subcategory">
    <ul><li><a href="/articles/ttb-maps-hub.html" target="_blank">âœ” Fishing Maps around Mustand Island and beyond!</a></li></ul>
  </div>

<script>
  let resizeTimeout;
  let lastSentHeight = 0;

  function sendHeightToParent() {
    const currentHeight = document.documentElement.scrollHeight;
    if (currentHeight !== lastSentHeight) {
      window.parent.postMessage({ type: 'resize-iframe', height: currentHeight }, '*');
      lastSentHeight = currentHeight;
    }
  }

  function debouncedResize(delay = 150) {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(sendHeightToParent, delay);
  }

  // ResizeObserver to watch layout shifts
  const resizeObserver = new ResizeObserver(() => debouncedResize(100));
  resizeObserver.observe(document.body);

  // MutationObserver to catch attribute changes or added/removed nodes
  const mutationObserver = new MutationObserver(() => debouncedResize(200));
  mutationObserver.observe(document.body, {
    attributes: true,
    childList: true,
    subtree: true
  });

  // Initial resize after load
  document.addEventListener('DOMContentLoaded', () => setTimeout(sendHeightToParent, 300));

  window.addEventListener('resize', () => debouncedResize(200));
</script>

<script>
  // Ensure collapsed even if something else tried to open them
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".sub-subcategory").forEach(el => {
      el.style.display = "none";
    });
  });

  // Click a category to toggle its next sub-subcategory
  function toggle(element) {
    const panel = element.nextElementSibling;
    if (!panel || !panel.classList.contains('sub-subcategory')) return;

    const isOpen = panel.style.display === "block";
    // (optional) close others
    document.querySelectorAll(".sub-subcategory").forEach(el => {
      if (el !== panel) el.style.display = "none";
    });
    panel.style.display = isOpen ? "none" : "block";

    // notify parent about height change
    if (typeof debouncedResize === "function") {
      debouncedResize(100);
      setTimeout(sendHeightToParent, 600);
    }
  }
</script>

<!-- Shared centered popup for all article links -->
<script>
  (function () {
    const POPUP_NAME = "HookedPopup";
    const POPUP_W = 1200;
    const POPUP_H = 700;

    function centerOverOpener(w, h) {
      const ow = window.outerWidth  || window.innerWidth  || screen.width;
      const oh = window.outerHeight || window.innerHeight || screen.height;
      const sx = (typeof window.screenX === "number" ? window.screenX : window.screenLeft) || 0;
      const sy = (typeof window.screenY === "number" ? window.screenY : window.screenTop)  || 0;

      let left = Math.round(sx + (ow - w) / 2);
      let top  = Math.round(sy + (oh - h) / 2);

      const availLeft = screen.availLeft ?? 0;
      const availTop  = screen.availTop  ?? 0;
      const availW    = screen.availWidth  ?? screen.width;
      const availH    = screen.availHeight ?? screen.height;
      left = Math.max(availLeft, Math.min(left, availLeft + availW - w));
      top  = Math.max(availTop,  Math.min(top,  availTop  + availH - h));

      return { left, top };
    }

    function openCustomPopup(url) {
      const { left, top } = centerOverOpener(POPUP_W, POPUP_H);
      window.open(
        url,
        POPUP_NAME, // reuse same window
        [
          `width=${POPUP_W}`,
          `height=${POPUP_H}`,
          `left=${left}`,
          `top=${top}`,
          "resizable=yes",
          "scrollbars=yes",
          "noopener=yes"
        ].join(",")
      );
    }

    // Intercept all normal links on this page and open in the shared popup
    function attachPopupHandlers() {
      document.querySelectorAll("a[href]").forEach(a => {
        a.addEventListener("click", function (e) {
          const href = this.getAttribute("href") || "";

          // Respect user intent and special schemes
          const isModified = e.defaultPrevented ||
                             e.button === 1 || // middle click
                             e.metaKey || e.ctrlKey || e.shiftKey || e.altKey;
          const isHash   = href.startsWith("#");
          const isJs     = href.startsWith("javascript:");
          const isMail   = href.startsWith("mailto:");
          const isTel    = href.startsWith("tel:");
          const hasDownload = this.hasAttribute("download");
          const noPopup = this.dataset.noPopup !== undefined; // opt-out

          if (isModified || isHash || isJs || isMail || isTel || hasDownload || noPopup) {
            return; // let the browser handle it normally
          }

          e.preventDefault();
          e.stopPropagation();
          openCustomPopup(this.href);
        });
      });
    }

    document.addEventListener("DOMContentLoaded", attachPopupHandlers);
  })();
</script>

</body>
</html>
